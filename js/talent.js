"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),Talent=function(){function e(){_classCallCheck(this,e),this.wrap=document.getElementById("talent_wrap"),this.content=document.getElementById("content"),this.eleInfo=document.createElement("div"),this.eleInfo.className="text",this.spAll=12,this.sp=0,this.init()}return _createClass(e,[{key:"init",value:function(){this.born(),this.addEvent()}},{key:"born",value:function(){var e='<div id="lf1"></div>\n					<div id="lf2"></div>\n					<div id="mi1"></div>\n					<div id="mi2"></div>\n					<div id="mi3"></div>\n					<div id="mi4"></div>\n					<div id="mi5"></div>\n					<div id="mi6"></div>\n					<div id="rt1"></div>\n					<div id="rt2"></div>\n					<div class="sp"></div>\n					<div class="go">进入</div>';for(var t in data.talent)e+='<div class="t" id="'+t+'" style="left:'+(data.talent[t].left+75)+"px;top:"+(data.talent[t].top+130)+"px;background-position:"+data.talent[t].l1+"px "+data.talent[t].t1+'px;">\n						<div class="info">\n							0/'+data.talent[t].n+"\n						</div>\n					</div>";this.content.innerHTML+=e,this.spFn()}},{key:"addEvent",value:function(){var e=this;this.content.addEventListener("mouseover",function(t){var n=t.target;"t"===n.className&&(e.showText(n.id),TweenMax.to(t.target,.1,{scale:1.2,delay:0,ease:Linear.easeOut}))}),this.content.addEventListener("mouseout",function(t){var n=t.target;"t"===n.className&&(e.remove(),TweenMax.to(t.target,.1,{scale:1,delay:0,ease:Linear.easeOut}))}),this.content.addEventListener("mousemove",function(t){var n=t.target;"t"===n.className&&(e.eleInfo.style.left=t.clientX-e.content.getBoundingClientRect().left+15+"px",e.eleInfo.style.top=t.clientY-e.content.getBoundingClientRect().top+15+"px")}),this.content.addEventListener("click",function(t){var n=t.target;if("t"===n.className&&1===t.which){var a=n.id,i=data.talent[a];if(e.eleInfo.getElementsByTagName("header")[0].dataset.pre||i.now==i.n)return void e.defeat();if(e.sp++,e.sp>e.spAll)return e.sp=e.spAll,void e.defeat();au.volume=.8,au.src="../audio/click.mp3";var o=n.getElementsByClassName("info")[0];i.now++,1===i.now&&(n.style.backgroundPosition=i.l2+"px "+i.t2+"px"),i.now==i.n&&(o.style.color="yellow",o.style.borderColor="yellow"),e.spFn(),o.innerHTML=i.now+"/"+i.n,e.remove(),e.showText(a)}else"go"===n.className&&1===t.which&&(au.volume=.8,au.src="../audio/click.mp3",setTimeout(function(){c.newPlay(),e.out()},100))}),this.content.addEventListener("contextmenu",function(t){var n=t.target;if("t"===n.className&&3===t.which){var a=n.id,i=data.talent[a];if(0==i.now)return e.defeat(),void t.preventDefault(a);if(1==i.now&&data.talent[i.next]&&0!==data.talent[i.next].now)return e.defeat(),void t.preventDefault();au.volume=.8,au.src="../audio/click.mp3";var o=n.getElementsByClassName("info")[0];i.now--,0==i.now&&(n.style.backgroundPositionX=i.l1+"px",n.style.backgroundPositionY=i.t1+"px"),e.sp--,e.spFn(),o.style.color="green",o.style.borderColor="green",o.innerHTML=i.now+"/"+i.n,e.remove(),e.showText(a)}t.preventDefault()})}},{key:"spFn",value:function(){var e=this.content.getElementsByClassName("sp")[0];e.innerHTML="剩余点数 ："+(this.spAll-this.sp)}},{key:"showText",value:function(e){var t=data.talent[e],n="";if(t.pre){for(var a=!0,i=0;i<t.pre.length;i++)0===data.talent[t.pre[i]].now&&(a=!1);if(a===!0)n+="<header>\n						"+t.name+'\n					</header>\n					<div class="num">\n						等级：'+t.now+"/"+t.n+"\n					</div>";else{n+='<header data-pre="0"; style="color:rgba(100,100,220,1);">\n						'+t.name+"\n					</header>";for(var i=0;i<t.pre.length;i++)0===data.talent[t.pre[i]].now&&(n+='<div class="num" style="color:red;">\n								请先学习 ：'+data.talent[t.pre[i]].name+"\n							</div>")}}else n+="<header>\n						"+t.name+'\n					</header>\n					<div class="num">\n						等级：'+t.now+"/"+t.n+"\n					</div>";n+=0===t.now?'<div class="describe">\n					下一级:'+t.dis[0]+"\n				</div>":t.now===t.n?'<div class="describe">\n					'+t.dis[t.n-1]+"\n				</div>":'<div class="describe">\n					'+t.dis[t.now-1]+'\n				</div>\n				<div class="describe">\n					下一级:'+t.dis[t.now]+"\n				</div>",this.eleInfo.innerHTML=n,this.content.appendChild(this.eleInfo)}},{key:"remove",value:function(){this.content.removeChild(this.eleInfo)}},{key:"defeat",value:function(){au.volume=1,au.src="../audio/metal.mp3"}},{key:"count",value:function(){var e={};for(var t in data.talent)data.talent.hasOwnProperty(t)&&(e[t]=data.talent[t].now);return e}},{key:"enter",value:function(){home.main.style.zIndex=1,c.can.style.zIndex=2,t.wrap.style.zIndex=3,TweenMax.to("#content",1,{y:800,delay:.2,ease:Bounce.easeOut})}},{key:"out",value:function(){TweenMax.to("#content",.6,{y:-800,delay:0,ease:Linear.easeOut}),setTimeout(function(){home.main.style.zIndex=1,c.can.style.zIndex=3,t.wrap.style.zIndex=2},1e3)}}]),e}();